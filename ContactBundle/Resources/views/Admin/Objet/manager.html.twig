{% extends "GlobalBundle:Admin/Layout:layout.html.twig" %}

{% block cssBefore %}
	<link href="{{ asset('js/sweet/sweet.css')}}" rel="stylesheet" type="text/css">
{% endblock %}

{% block contentTitre %}Gestion des objets{% endblock %}

{% block content %}

    {{ form_start(form, {'attr': {novalidate: 'novalidate'}}) }}

		{{ form_errors(form) }}

		{{ form_label(form.nom, "Nom *") }}
		{{ form_errors(form.nom) }}
		{{ form_widget(form.nom, {'attr': {'class': 'form-elem big'}}) }}

        {{ form_label(form.email, "Email *") }}
        {{ form_errors(form.email) }}
        {{ form_widget(form.email, {'attr': {'class': 'form-elem big'}}) }}

		{{ form_rest(form) }}

    {{ form_end(form) }}

	<br><br><table class="table">
		
		<tr>
			<th class="left" width="90%">Objet</th>
			<th colspan="2" width="10%">Actions</th>
		</tr>

		{% for objet in objets %}
			
			<tr>

				<td class="left">
					<p class="tableDate">Ajouté le {{ objet.created|date("d/m/Y à H:i") }}</p>
					{% if objet.changed is not null %}
						<p class="tableDate">Modifié le {{ objet.changed|date("d/m/Y à H:i") }}</p>
					{% endif %}
					<p><strong>{{ objet.nom }}</strong></p>
                    <p>{{ objet.email }}</p>
				</td>

				<td>
                    <a href="{{ path('admin_contactobjet_modifier',{'id': objet.id})}}" title="Modifier l'objet"><i class=" tableAction fa fa-pencil"></i></a>
                </td>

				<td>
                    {% if objet.contacts|length == 0 %}
						<a href="{{ path('admin_contactobjet_supprimer',{'id': objet.id})}}" class="sweetDelete" title="Supprimer l'objet" data-title="Supprimer l'objet" data-text="êtes vous sur ?"><i class=" tableAction fa fa-trash"></i></a>
                    {%  else %}
                        <a href="#" class="sweetAlert" title="Supprimer l'objet" data-title="Suppression impossible" data-text="Il éxiste une relation avec un contact"><i class="disabled tableAction fa fa-trash"></i></a>
                    {% endif %}
                </td>
			</tr>

		{% else %}
			<tr>
				<td colspan="3">Aucun objet</td>
			</tr>
		{% endfor %}

	</table>

{% endblock %}

{% block scriptBefore %}
	<script type="text/javascript" src="{{ asset('js/sweet/sweet.js')}}"></script>
{% endblock %}
